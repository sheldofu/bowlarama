{"version":3,"sources":["../../scripts/anim.js"],"names":["Anim","players","currentPlayer","currentRoll","bindUI","scoreSetup","pins","document","querySelectorAll","ball","getElementById","ind","next","addEventListener","resetFrame","bind","turnLoop","i","length","row","createElement","id","appendChild","totalScore","innerHTML","classList","add","scoreReveal","rollBall","nextTurn","nextPlayer","score","playerEqualiser","Math","ceil","remove","pinScore","round","pinsKnocked","pinCount"],"mappings":"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","file":"anim.js","sourcesContent":["// anim.js\r\nexport default class Anim {\r\n\r\n  constructor(players) {\r\n    this.players = players;\r\n    this.currentPlayer = 0;\r\n    this.currentRoll = 0;\r\n    this.bindUI();\r\n    this.scoreSetup();\r\n  }\r\n\r\n  bindUI() {\r\n    this.pins = document.querySelectorAll(\".pins\");\r\n    this.ball = document.getElementById('ball');\r\n    var ind = document.getElementById('ind');\r\n    var next = document.getElementById('nextRound');\r\n    ind.addEventListener(\"animationend\", this.resetFrame.bind(this));\r\n    next.addEventListener(\"click\", this.turnLoop.bind(this));\r\n  }\r\n\r\n  scoreSetup() {\r\n    for (let i = 0; i < this.players.length; i++) {\r\n      var row = document.createElement(\"tr\");\r\n      row.id = \"player\"+i;\r\n      document.getElementById('scoreTable').appendChild(row);\r\n      var totalScore = document.createElement(\"td\");\r\n      totalScore.innerHTML = this.players[i].totalScore();\r\n      document.getElementById('player' + i).appendChild(totalScore);\r\n    }\r\n  }\r\n\r\n  rollBall() {\r\n    this.ball.classList.add(\"bowling\");\r\n  }\r\n\r\n  turnLoop() {\r\n    this.scoreReveal();\r\n    this.rollBall();\r\n    this.nextTurn();\r\n    this.nextPlayer();\r\n  }\r\n\r\n  scoreReveal() {\r\n    var score = document.createElement(\"td\");\r\n    var playerEqualiser = Math.ceil((this.currentRoll+1)/this.players.length);\r\n    score.innerHTML = this.players[this.currentPlayer].score[playerEqualiser-1];\r\n    document.getElementById('player'+this.currentPlayer).appendChild(score);\r\n  }\r\n\r\n  nextPlayer() {\r\n    if (this.currentPlayer + 1 === this.players.length) {\r\n      this.currentPlayer = 0;\r\n    } else {\r\n      this.currentPlayer += 1;\r\n    }\r\n  }\r\n\r\n  resetFrame() {\r\n    for (var i = 0; i < this.pins.length; i++) {\r\n      this.pins[i].classList.remove(\"knocked\");\r\n    }\r\n    this.ball.classList.remove(\"bowling\"); \r\n  }\r\n\r\n  nextTurn() {\r\n    var pinScore = this.players[this.currentPlayer].score[Math.round((this.currentRoll-1)/this.players.length)];\r\n    this.currentRoll = this.currentRoll + 1;\r\n    this.pinsKnocked(pinScore);\r\n    if (pinScore === 0) {\r\n      this.resetFrame();\r\n    } \r\n  }\r\n\r\n  pinsKnocked(pinCount) {\r\n    for (var i = 0; i < pinCount; i++) {\r\n      this.pins[i].classList.add(\"knocked\");\r\n    } \r\n  }\r\n}\r\n"]}